/*!
 * APP.js
 * ------
 * Copyright (c) 2012, T. Zengerink
 * https://raw.github.com/Mytho/APP.js/master/LISENCE.md
 */
var APP=APP||{};(function(m,f){var g={},l={baseUri:"",debug:false,moduleStartMethod:"start",moduleStopMethod:"stop",namespaceDelimiter:"."};var i=function(q,p){for(var o in p){q[o]=p[o]}return q};var d=function(o){if(typeof o==="string"){return l[o]}else{if(typeof o==="object"){return i(l,o)}}return l};var h=function(o){return o.split(l.namespaceDelimiter).pop()};var j=function(p){var o=p.split(l.namespaceDelimiter);o.pop();return e(o.join(l.namespaceDelimiter))};var n=function(o,r){var q=r!==false?l.moduleStartMethod:l.moduleStopMethod;for(var p in o){if(typeof o[p]==="object"&&p.charAt(0)===p.charAt(0).toUpperCase()){if(p!=="Core"&&o[p].hasOwnProperty(q)){o[p][q].call()}n(o[p],r)}}};var e=function(r){var p=0,q=r.split(l.namespaceDelimiter),t=this;for(;p<q.length;p++){t[q[p]]=t[q[p]]||{};t=t[q[p]]}return t};var c=(function(){return function(s,t,r){if(typeof r==="undefined"){r=t;t=[]}var o=h(s),q=j(s),p=(typeof r==="function")?r.apply(this,t):r;switch(typeof p){case"object":q[o]=i((q[o]||{}),p);break;default:q[o]=p;break}}})();var b=function(o){d(o);n(m)};var k=function(){n(m,false)};var a=(function(){var o={},p=f.location.host,q=f.location.protocol;o.base=function(){return q+"//"+p+(l.baseUri.replace(/^\/|\/$/g,"")&&"/"+l.baseUri.replace(/^\/|\/$/g,""))};o.site=function(r){return o.base()+"/"+r.replace(/^\/|\/$/g,"")};return o})();g.config=d;g.extend=i;g.Url=a;g.Log=(function(){var o={};o.history=[];o.write=function(){for(var p=arguments.length;p>0;p--){o.history.push(arguments[p-1]);if(l.debug&&f.console){console.log(arguments[p-1])}}};return o})();f.log=g.Log.write;m.module=c;m.start=b;m.stop=k;m.Core=g})(APP,window);APP.module("APP.PubSub",function(){var a={},b={};a.off=function(c){if(typeof c!=="string"){throw new Error("Topic must be a string")}b[c]=[]};a.on=function(c,d){if(typeof c!=="string"){throw new Error("Topic must be a string")}if(typeof d!=="function"){throw new Error("Callback must be a function")}if(typeof b[c]==="undefined"){b[c]=[]}b[c].push(d)};a.trigger=function(d,c){if(typeof d!=="string"){throw new Error("Topic must be a string")}for(var e in b[d]){b[d][e](c)}};return a});