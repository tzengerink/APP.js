/*!
 * APP.js v0.1.2
 * - - -
 * Copyright (c) 2013 T. Zengerink
 * Released under MIT lisenced
 * https://raw.github.com/Mytho/APP.js/master/LISENCE.md
 */
(function(){window.APP=function(a,b){var c,d,e,f,g,h,i,j,k,l,m;return i={baseUri:"",debug:!1},h=function(){return Array.prototype.slice.call(arguments).join("")},j=function(a,b){var c;for(c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},c=function(){var a;return a=j({},i),{get:function(b){return b?a[b]:a},set:function(b,c){return"object"==typeof b&&(a=j(a,b)),a[b]=c,a}}}(),d=function(){var a;return a={},{bind:function(a,b,c){return a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent("on"+b,c):void 0},unbind:function(a,b,c){return a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent?a.detachEvent("on"+b,c):void 0},off:function(b){if("string"!=typeof b)throw new Error("Topic must be a string");return a[b]=[]},on:function(b,c){if("string"!=typeof b)throw new Error("Topic must be a string");if("function"!=typeof c)throw new Error("Callback must be a function");return"undefined"==typeof a[b]&&(a[b]=[]),a[b].push(c)},trigger:function(b,c){var d,e;if("string"!=typeof b)throw new Error("Topic must be a string");e=[];for(d in a[b])a[b].hasOwnProperty(d)?e.push(a[b][d](c)):e.push(void 0);return e}}}(),e=function(){var a,c;return c="KeyHandler-",a={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",37:"left",38:"up",39:"right",40:"down",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",96:"num0",97:"num1",98:"num2",99:"num3",100:"num4",101:"num5",102:"num6",103:"num7",104:"num8",105:"num9"},d.bind(b,"keyup",function(b){return/input|textarea|select/i.test((b.target||b.srcElement).nodeName)?void 0:d.trigger(h(c,a[b.keyCode]),b)}),{off:function(a){return d.off(h(c,a.toLowerCase()))},on:function(a,b){return d.on(h(c,a.toLowerCase()),b)},preventScrollMovement:function(){return d.bind(b,"keydown",function(a){return a.keyCode>=37&&a.keyCode<=40?(a.preventDefault(),!1):void 0})},trigger:function(a,b){return d.trigger(h(c,a.toLowerCase()),b)}}}(),f=function(){return{history:[],write:function(){var b,d,e;for(d=0,e=arguments.length;e>d;d++)b=arguments[d],f.history.push(b);return c.get("debug")&&a.console?a.console.log(arguments):void 0}}}(),g=function(){var b;return b=function(a){return a.replace(/^\/|\/$/g,"")},{base:function(d){var e;return b(c.get("baseUri"))&&(e="/"),h(d||a.location.protocol.replace(":",""),"://",a.location.host,e,b(c.get("baseUri")))},site:function(a,c){return h(g.base(c),"/",b(a))}}}(),k=function(){var b,c,d;return b=function(a){return a.split(".").pop()},c=function(a){var b;return b=a.split(".").slice(0,-1),d(b.join("."))},d=function(b){var c,d,e,f,g;for(d=a,g=b.split("."),e=0,f=g.length;f>e;e++)c=g[e],d[c]=d[c]||{},d=d[c];return d},function(a,d,e){var f,g;return"undefined"==typeof e&&(e=d,d=[]),g=c(a),f=b(a),k=e,"function"==typeof k&&(k=e.apply(this,d)),g[f]=k,"object"==typeof k&&(g[f]=j(g[f]||{},k)),"function"==typeof k.start?l(k.start):void 0}}(),l=function(){var c,e,f,g,h,i;return e=!1,h=[],i=!1,f=function(){var a,b,c,d;for(clearTimeout(i),e=!0,d=[],b=0,c=h.length;c>b;b++)a=h[b],d.push(a.call());return d},b.documentElement&&(c=function(){var d;try{b.documentElement.doScroll("left"),f()}catch(e){d=e,i=a.setTimeout(c,20)}return!1},c()),d.bind(b,"DOMContentLoaded",g=function(){return d.unbind(b,"DOMContentLoaded",g),f()}),function(a){return e?a():h.push(a)}}(),m=function(a){return c.set(a)},{Config:c,Events:d,KeyHandler:e,Log:f,Url:g,log:f.write,module:k,ready:l,start:m}}(window,document)}).call(this);