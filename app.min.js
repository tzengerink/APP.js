(function(){window.APP=(function(h,l){var d,m,f,b,e,i,g,c,k,a,j;e={baseUri:"",debug:true};i=function(o,p){var n;for(n in p){if(p.hasOwnProperty(n)){o[n]=p[n]}}return o};d=(function(){var n;n=i({},e);return{get:function(o){if(!o){return n}return n[o]},set:function(o,p){if(typeof o==="object"){n=i(n,o)}n[o]=p;return n}}})();m=(function(){return{bind:function(o,p,n){if(o.addEventListener){return o.addEventListener(p,n,false)}else{if(o.attachEvent){return o.attachEvent("on"+p,n)}}},unbind:function(o,p,n){if(o.removeEventListener){return o.removeEventListener(p,n,false)}else{if(o.detachEvent){return o.detachEvent("on"+p,n)}}}}})();f=(function(){return{history:[],write:function(){var n,p,o;for(p=0,o=arguments.length;p<o;p++){n=arguments[p];f.history.push(n)}if(h.hasOwnProperty(console)&&d.get("debug")){return h.console.log(arguments)}}}})();b=(function(){var n;n=function(o){return o.replace(/^\/|\/$/g,"")};return{base:function(){var o;if(n(d.get("baseUri"))){o="/"}return[h.location.protocol,"//",h.location.host,o,n(d.get("baseUri"))].join("")},site:function(o){return[b.base(),"/",n(o)].join("")}}})();c=(function(){var p,o,n;p=function(q){return q.split(".").pop()};o=function(r){var q;q=r.split(".").slice(0,-1);return n(q.join("."))};n=function(v){var r,u,t,q,s;u=h;s=v.split(".");for(t=0,q=s.length;t<q;t++){r=s[t];u[r]=u[r]||{};u=u[r]}return u};return function(r,s,u){var t,q;if(typeof u==="undefined"){u=s;s=[]}q=o(r);t=p(r);c=u;if(typeof c==="function"){c=u.apply(this,s)}q[t]=c;if(typeof c==="object"){return q[t]=i(q[t]||{},c)}}})();k=(function(){var p,o,n,r,q;o=false;q=[];n=function(){var u,v,t,s;o=true;s=[];for(v=0,t=q.length;v<t;v++){u=q[v];console.log(u);s.push(u.call())}return s};if(l.documentElement){p=function(){try{l.documentElement("left");return n()}catch(s){return h.setTimeout(p,10)}};p()}m.bind(l,"DOMContentLoaded",r=function(){m.unbind(l,"DOMContentLoaded",r);return n()});return function(s){if(o){return s()}else{return q.push(s)}}})();g=function(p,s){var o,r,q,n;r=(s===false?"stop":"start");o=function(v){var u,t;u=typeof p[v]==="object";t=v.charAt(0)===v.charAt(0).toUpperCase();return u&&t};n=[];for(q in p){if(p.hasOwnProperty(q)&&o(q)){if(p[q].hasOwnProperty(r)){p[q][r].call()}n.push(g(p[q],s))}else{n.push(void 0)}}return n};a=function(n){d.set(n);return k(function(){return g(APP)})};j=function(){return g(APP,false)};h.log=f.write;return{module:c,ready:k,start:a,stop:j,Config:d,Events:m,Log:f,Url:b}})(window,document)}).call(this);(function(){APP.module("APP.PubSub",function(){var a;a={};return{off:function(b){if(typeof b===!"string"){throw new Error("Topic must be a string")}return a[b]=[]},on:function(b,c){if(typeof b===!"string"){throw new Error("Topic must be a string")}if(typeof b===!"function"){throw new Error("Callback must be a function")}if(typeof a[b]==="undefined"){a[b]=[]}return a[b].push(c)},trigger:function(d,c){var e,b;if(typeof d===!"string"){throw new Error("Topic must be a string")}b=[];for(e in a[d]){if(a[d].hasOwnProperty(e)){b.push(a[d][e](c))}else{b.push(void 0)}}return b}}})}).call(this);