/*!
 * APP.js v0.1.1
 * - - -
 * Copyright (c) 2013 T. Zengerink
 * Released under MIT lisenced
 * https://raw.github.com/Mytho/APP.js/master/LISENCE.md
 */
(function(){window.APP=function(n,t){var r,e,o,u,i,f,c,a,s,l,d,p,v;return c={baseUri:"",debug:!1},f=function(){return Array.prototype.slice.call(arguments).join("")},a=function(n,t){var r;for(r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);return n},r=function(){var n;return n=a({},c),{get:function(t){return t?n[t]:n},set:function(t,r){return"object"==typeof t&&(n=a(n,t)),n[t]=r,n}}}(),e=function(){var n;return n={},{bind:function(n,t,r){return n.addEventListener?n.addEventListener(t,r,!1):n.attachEvent?n.attachEvent("on"+t,r):void 0},unbind:function(n,t,r){return n.removeEventListener?n.removeEventListener(t,r,!1):n.detachEvent?n.detachEvent("on"+t,r):void 0},off:function(t){if("string"!=typeof t)throw Error("Topic must be a string");return n[t]=[]},on:function(t,r){if("string"!=typeof t)throw Error("Topic must be a string");if("function"!=typeof r)throw Error("Callback must be a function");return n[t]===void 0&&(n[t]=[]),n[t].push(r)},trigger:function(t,r){var e,o;if("string"!=typeof t)throw Error("Topic must be a string");o=[];for(e in n[t])n[t].hasOwnProperty(e)?o.push(n[t][e](r)):o.push(void 0);return o}}}(),o=function(){var n,r;return r="KeyHandler-",n={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",37:"left",38:"up",39:"right",40:"down",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",96:"num0",97:"num1",98:"num2",99:"num3",100:"num4",101:"num5",102:"num6",103:"num7",104:"num8",105:"num9"},e.bind(t,"keyup",function(t){return/input|textarea|select/i.test((t.target||t.srcElement).nodeName)?void 0:e.trigger(f(r,n[t.keyCode]),t)}),{off:function(n){return e.off(f(r,n.toLowerCase()))},on:function(n,t){return e.on(f(r,n.toLowerCase()),t)},preventScrollMovement:function(){return e.bind(t,"keydown",function(n){return n.keyCode>=37&&40>=n.keyCode?(n.preventDefault(),!1):void 0})},trigger:function(n,t){return e.trigger(f(r,n.toLowerCase()),t)}}}(),u=function(){return{history:[],write:function(){var t,e,o;for(e=0,o=arguments.length;o>e;e++)t=arguments[e],u.history.push(t);return r.get("debug")&&n.console?n.console.log(arguments):void 0}}}(),i=function(){var t;return t=function(n){return n.replace(/^\/|\/$/g,"")},{base:function(){var e;return t(r.get("baseUri"))&&(e="/"),f(n.location.protocol,"//",n.location.host,e,t(r.get("baseUri")))},site:function(n){return f(i.base(),"/",t(n))}}}(),l=function(){var t,r,e;return t=function(n){return n.split(".").pop()},r=function(n){var t;return t=n.split(".").slice(0,-1),e(t.join("."))},e=function(t){var r,e,o,u,i;for(e=n,i=t.split("."),o=0,u=i.length;u>o;o++)r=i[o],e[r]=e[r]||{},e=e[r];return e},function(n,e,o){var u,i;return o===void 0&&(o=e,e=[]),i=r(n),u=t(n),l=o,"function"==typeof l&&(l=o.apply(this,e)),i[u]=l,"object"==typeof l?i[u]=a(i[u]||{},l):void 0}}(),d=function(){var r,o,u,i,f,c;return o=!1,f=[],c=!1,u=function(){var n,t,r,e;for(clearTimeout(c),o=!0,e=[],t=0,r=f.length;r>t;t++)n=f[t],e.push(n.call());return e},t.documentElement&&(r=function(){try{t.documentElement.doScroll("left"),u()}catch(e){c=n.setTimeout(r,20)}return!1},r()),e.bind(t,"DOMContentLoaded",i=function(){return e.unbind(t,"DOMContentLoaded",i),u()}),function(n){return o?n():f.push(n)}}(),s=function(n,t){var r,e,o,u;e=t===!1?"stop":"start",r=function(t){var r,e;return r="object"==typeof n[t],e=t.charAt(0)===t.charAt(0).toUpperCase(),r&&e},u=[];for(o in n)n.hasOwnProperty(o)&&r(o)?(n[o].hasOwnProperty(e)&&n[o][e].call(),u.push(s(n[o],t))):u.push(void 0);return u},p=function(n){return r.set(n),d(function(){return s(APP)})},v=function(){return s(APP,!1)},{Config:r,Events:e,KeyHandler:o,Log:u,Url:i,log:u.write,module:l,ready:d,start:p,stop:v}}(window,document)}).call(this);